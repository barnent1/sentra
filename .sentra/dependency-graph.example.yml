# Sentra Dependency Graph Example
# This file defines the dependency graph for parallelizable issue execution.
#
# Copy this to dependency-graph.yml and customize for your project.

project: "Bookmark Manager SaaS"
total_issues: 250

# Batches organize issues into sequential execution phases
batches:
  batch_1:
    name: "Foundation"
    parallel_limit: 10  # Max 10 issues in parallel
    estimated_duration: "3-5 days"
    issues: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    dependencies: []  # No dependencies - can start immediately

  batch_2:
    name: "Core APIs"
    parallel_limit: 15
    estimated_duration: "5-7 days"
    issues: [11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25]
    dependencies:
      all_from_batch: ["batch_1"]  # Requires ALL of batch_1 to complete

  batch_3:
    name: "UI Components"
    parallel_limit: 20
    estimated_duration: "7-10 days"
    issues: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45]
    dependencies:
      all_from_batch: ["batch_2"]  # Requires ALL of batch_2 to complete

  batch_4:
    name: "Advanced Features"
    parallel_limit: 15
    estimated_duration: "5-7 days"
    issues: [46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60]
    dependencies:
      all_from_batch: ["batch_3"]

# Issue-level dependencies (overrides batch dependencies for fine-grained control)
issues:
  # Foundation issues (no dependencies)
  - id: 1
    depends_on: []
    soft_depends_on: []
    blocks: []
    conflicts_with: []
    files:
      - "prisma/schema.prisma"

  - id: 2
    depends_on: []
    soft_depends_on: []
    blocks: []
    conflicts_with: []
    files:
      - "src/utils/validation.ts"

  - id: 3
    depends_on: []
    soft_depends_on: []
    blocks: []
    conflicts_with: []
    files:
      - "src/middleware/auth.ts"

  # Core API issues
  - id: 11
    depends_on: [1]  # Requires database schema
    soft_depends_on: [3]  # Should have auth, but not critical
    blocks: [26, 27]  # Blocks UI components that use this API
    conflicts_with: []
    files:
      - "src/app/api/bookmarks/route.ts"
      - "src/app/api/bookmarks/[id]/route.ts"

  - id: 12
    depends_on: [1]
    soft_depends_on: [3]
    blocks: [28, 29]
    conflicts_with: []
    files:
      - "src/app/api/projects/route.ts"
      - "src/app/api/projects/[id]/route.ts"

  # UI Component with explicit dependencies
  - id: 45
    depends_on: [12, 15]  # Needs Project API and Auth middleware
    soft_depends_on: []
    blocks: [50, 51]  # ProjectList and Dashboard need this component
    conflicts_with: [46]  # Cannot run in parallel with issue 46 (same file)
    files:
      - "src/components/ProjectCard.tsx"
      - "src/components/ProjectCard.test.tsx"

  - id: 46
    depends_on: [12]
    soft_depends_on: []
    blocks: []
    conflicts_with: [45]  # Cannot run in parallel with issue 45
    files:
      - "src/components/ProjectCard.tsx"  # Same file as issue 45
      - "src/components/ProjectCardActions.tsx"

  # Example of complex dependency
  - id: 50
    depends_on: [45, 46]  # Needs both ProjectCard variations
    soft_depends_on: [11]  # Better with bookmark API, but optional
    blocks: [60]
    conflicts_with: []
    files:
      - "src/app/projects/page.tsx"

# Dependency types explained:
#
# depends_on (HARD):
#   - MUST complete before this issue can start
#   - Blocking dependency
#   - Example: API must exist before UI component that uses it
#
# soft_depends_on (SOFT):
#   - SHOULD complete first, but not blocking
#   - Warning shown if not complete
#   - Example: Auth middleware should exist, but can develop without it
#
# blocks (REVERSE):
#   - This issue blocks other issues
#   - Automatically computed from depends_on, but can be explicit
#   - Useful for visibility
#
# conflicts_with (PARALLEL):
#   - Cannot run in parallel (same files being modified)
#   - Will be executed sequentially
#   - Example: Two issues modifying the same component file
